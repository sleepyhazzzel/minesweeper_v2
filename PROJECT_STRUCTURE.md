# é¡¹ç›®æ–‡ä»¶ç»“æ„

```
minesweeper_v2/
â”‚
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”‚
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ models/                 # OOP æ¨¡å‹å±‚ (ä¸šåŠ¡é€»è¾‘)
â”‚   â”‚   â”œâ”€â”€ types.ts           # ç±»å‹å®šä¹‰å’Œæšä¸¾
â”‚   â”‚   â”œâ”€â”€ Cell.ts            # Cell ç±» - å•ä¸ªæ ¼å­
â”‚   â”‚   â”œâ”€â”€ Board.ts           # Board ç±» - æ¸¸æˆæ£‹ç›˜
â”‚   â”‚   â”œâ”€â”€ Timer.ts           # Timer ç±» - è®¡æ—¶å™¨
â”‚   â”‚   â””â”€â”€ Game.ts            # Game ç±» - æ¸¸æˆæ§åˆ¶å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/            # Vue Composition API
â”‚   â”‚   â””â”€â”€ useGame.ts         # æ¸¸æˆçŠ¶æ€ç®¡ç† Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ components/             # Vue ç»„ä»¶ (è§†å›¾å±‚)
â”‚   â”‚   â”œâ”€â”€ Cell.vue           # å•ä¸ªæ ¼å­ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameBoard.vue      # æ¸¸æˆæ£‹ç›˜ç»„ä»¶
â”‚   â”‚   â””â”€â”€ GameHeader.vue     # æ¸¸æˆå¤´éƒ¨ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue                # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts                # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ style.css              # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ vite-env.d.ts          # Vite ç±»å‹å£°æ˜
â”‚
â”œâ”€â”€ index.html                 # HTML æ¨¡æ¿
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts             # Vite é…ç½®
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â””â”€â”€ OOP_ARCHITECTURE.md        # OOP æ¶æ„è¯¦ç»†è¯´æ˜

```

## æ–‡ä»¶è¯´æ˜

### ğŸ“¦ Models (OOP ä¸šåŠ¡é€»è¾‘å±‚)

#### `types.ts` - ç±»å‹å®šä¹‰
- å®šä¹‰æ‰€æœ‰æšä¸¾ç±»å‹
- å®šä¹‰æ¥å£
- æ¸¸æˆé…ç½®å¸¸é‡

**å¯¼å‡ºå†…å®¹**:
- `Difficulty` - éš¾åº¦æšä¸¾
- `CellState` - æ ¼å­çŠ¶æ€æšä¸¾
- `GameStatus` - æ¸¸æˆçŠ¶æ€æšä¸¾
- `CellData` - æ ¼å­æ•°æ®æ¥å£
- `GameRecord` - æ¸¸æˆè®°å½•æ¥å£
- `DIFFICULTY_CONFIGS` - éš¾åº¦é…ç½®

#### `Cell.ts` - æ ¼å­ç±»
ç®¡ç†å•ä¸ªæ ¼å­çš„çŠ¶æ€å’Œè¡Œä¸º

**ä¸»è¦æ–¹æ³•**:
```typescript
setBomb()              // è®¾ç½®ä¸ºç‚¸å¼¹
setAdjacentBombs()     // è®¾ç½®å‘¨å›´ç‚¸å¼¹æ•°
reveal()               // æ‰“å¼€æ ¼å­
toggleFlag()           // åˆ‡æ¢æ——å¸œ
reset()                // é‡ç½®æ ¼å­
toData()               // è½¬æ¢ä¸ºæ•°æ®å¯¹è±¡
```

#### `Board.ts` - æ£‹ç›˜ç±»
ç®¡ç†æ•´ä¸ªæ¸¸æˆæ£‹ç›˜

**ä¸»è¦æ–¹æ³•**:
```typescript
generateBombs()                    // ç”Ÿæˆç‚¸å¼¹
revealCell(row, col)              // æ‰“å¼€æ ¼å­ï¼ˆé€’å½’ï¼‰
toggleFlag(row, col)              // åˆ‡æ¢æ——å¸œ
checkVictory()                    // æ£€æŸ¥æ˜¯å¦èƒœåˆ©
getRemainingFlags()               // è·å–å‰©ä½™æ——å¸œæ•°
revealAllBombs()                  // æ˜¾ç¤ºæ‰€æœ‰ç‚¸å¼¹
```

#### `Timer.ts` - è®¡æ—¶å™¨ç±»
ç®¡ç†æ¸¸æˆæ—¶é—´

**ä¸»è¦æ–¹æ³•**:
```typescript
start()                // å¼€å§‹è®¡æ—¶
stop()                 // åœæ­¢è®¡æ—¶
reset()                // é‡ç½®è®¡æ—¶
getFormattedTime()     // è·å–æ ¼å¼åŒ–æ—¶é—´
getTimeDigits()        // è·å–æ—¶é—´æ•°å­—æ•°ç»„
```

#### `Game.ts` - æ¸¸æˆæ§åˆ¶å™¨
åè°ƒæ‰€æœ‰æ¸¸æˆé€»è¾‘

**ä¸»è¦æ–¹æ³•**:
```typescript
start()                       // å¼€å§‹æ¸¸æˆ
restart()                     // é‡æ–°å¼€å§‹
changeDifficulty()            // æ”¹å˜éš¾åº¦
clickCell(row, col)           // ç‚¹å‡»æ ¼å­
toggleFlag(row, col)          // åˆ‡æ¢æ——å¸œ
getRemainingFlags()           // è·å–å‰©ä½™æ——å¸œ
```

**ä¾èµ–å…³ç³»**:
```
Game
â”œâ”€â”€ Board
â”‚   â””â”€â”€ Cell[]
â””â”€â”€ Timer
```

### ğŸ£ Composables (Vue é›†æˆå±‚)

#### `useGame.ts` - æ¸¸æˆ Hook
å°† OOP ç±»ä¸ Vue å“åº”å¼ç³»ç»Ÿé›†æˆ

**è¿”å›å†…å®¹**:
```typescript
{
  // åªè¯»çŠ¶æ€
  status,            // æ¸¸æˆçŠ¶æ€
  seconds,           // è®¡æ—¶ç§’æ•°
  cells,             // æ‰€æœ‰æ ¼å­
  difficulty,        // å½“å‰éš¾åº¦
  remainingFlags,    // å‰©ä½™æ——å¸œ
  currentRecord,     // å½“å‰éš¾åº¦æœ€ä½³è®°å½•
  isPlaying,         // æ˜¯å¦æ¸¸æˆä¸­
  isWon,             // æ˜¯å¦è·èƒœ
  isLost,            // æ˜¯å¦å¤±è´¥
  
  // æ–¹æ³•
  start,             // å¼€å§‹æ¸¸æˆ
  restart,           // é‡æ–°å¼€å§‹
  changeDifficulty,  // æ”¹å˜éš¾åº¦
  clickCell,         // ç‚¹å‡»æ ¼å­
  toggleFlag         // åˆ‡æ¢æ——å¸œ
}
```

### ğŸ¨ Components (è§†å›¾å±‚)

#### `Cell.vue` - æ ¼å­ç»„ä»¶
æ˜¾ç¤ºå•ä¸ªæ ¼å­

**Props**:
- `cellData: CellData` - æ ¼å­æ•°æ®
- `disabled?: boolean` - æ˜¯å¦ç¦ç”¨

**Events**:
- `@click` - å·¦é”®ç‚¹å‡»
- `@rightClick` - å³é”®ç‚¹å‡»

#### `GameBoard.vue` - æ£‹ç›˜ç»„ä»¶
æ˜¾ç¤ºæ•´ä¸ªæ¸¸æˆæ£‹ç›˜

**Props**:
- `cells: CellData[]` - æ‰€æœ‰æ ¼å­æ•°æ®
- `rows: number` - è¡Œæ•°
- `cols: number` - åˆ—æ•°
- `disabled?: boolean` - æ˜¯å¦ç¦ç”¨

**Events**:
- `@cellClick` - æ ¼å­ç‚¹å‡»
- `@cellRightClick` - æ ¼å­å³é”®

#### `GameHeader.vue` - å¤´éƒ¨ç»„ä»¶
æ˜¾ç¤ºæ¸¸æˆä¿¡æ¯å’Œæ§åˆ¶

**Props**:
- `difficulty: Difficulty` - éš¾åº¦
- `timeDigits: string[]` - æ—¶é—´æ•°å­—
- `flagsDigits: string[]` - æ——å¸œæ•°å­—
- `currentRecord: number` - æœ€ä½³è®°å½•

**Events**:
- `@restart` - é‡å¯æ¸¸æˆ
- `@info` - æ˜¾ç¤ºä¿¡æ¯
- `@changeDifficulty` - æ”¹å˜éš¾åº¦

#### `App.vue` - ä¸»ç»„ä»¶
æ•´åˆæ‰€æœ‰ç»„ä»¶ï¼Œç®¡ç†æ¸¸æˆæµç¨‹

## æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   App.vue                       â”‚
â”‚  (ä½¿ç”¨ useGame Hookï¼Œåè°ƒæ•´ä½“)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                      â”‚
           â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GameHeader  â”‚        â”‚  GameBoard   â”‚
    â”‚  (æ§åˆ¶é¢æ¿)  â”‚        â”‚   (æ£‹ç›˜)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   Cell   â”‚
                            â”‚  (æ ¼å­)   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·äº¤äº’ â†’ Vue ç»„ä»¶ â†’ useGame Hook â†’ Game ç±» â†’ Board/Timer â†’ Cell
                                              â†“
                                          å›è°ƒæ›´æ–°
                                              â†“
                                        Vue å“åº”å¼æ›´æ–°
```

## å…³é”®ç‰¹æ€§

### 1. æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- **Models**: çº¯ä¸šåŠ¡é€»è¾‘ï¼Œä¸ä¾èµ– Vue
- **Composables**: Vue å“åº”å¼é›†æˆå±‚
- **Components**: çº¯å±•ç¤ºç»„ä»¶

### 2. ç±»å‹å®‰å…¨
- å…¨éƒ¨ä½¿ç”¨ TypeScript
- ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- æ¸…æ™°çš„æ¥å£å®šä¹‰

### 3. å¯æµ‹è¯•æ€§
- ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äºæ¡†æ¶
- å¯ä»¥å•ç‹¬æµ‹è¯•æ¯ä¸ªç±»
- Mock å‹å¥½

### 4. å¯ç»´æŠ¤æ€§
- ä»£ç ç»„ç»‡æ¸…æ™°
- å•ä¸€èŒè´£åŸåˆ™
- æ˜“äºæ‰©å±•

### 5. æ€§èƒ½ä¼˜åŒ–
- Vue çš„å“åº”å¼ç³»ç»Ÿ
- è®¡ç®—å±æ€§ç¼“å­˜
- ç»„ä»¶çº§åˆ«çš„æ›´æ–°

## ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºæ¸¸æˆ
```typescript
import { Game } from '@/models/Game'
import { Difficulty } from '@/models/types'

const game = new Game(Difficulty.Easy, {
  onStatusChange: (status) => console.log(status),
  onTimerTick: (seconds) => console.log(seconds),
  onBoardUpdate: () => console.log('æ›´æ–°')
})

game.start()
```

### åœ¨ Vue ä¸­ä½¿ç”¨
```vue
<script setup lang="ts">
import { useGame } from '@/composables/useGame'
import { Difficulty } from '@/models/types'

const {
  cells,
  clickCell,
  toggleFlag
} = useGame(Difficulty.Easy)
</script>
```

## æ‰©å±•å»ºè®®

å¦‚æœéœ€è¦æ·»åŠ æ–°åŠŸèƒ½ï¼Œå»ºè®®çš„æ‰©å±•ç‚¹ï¼š

1. **æ–°å¢æ¸¸æˆæ¨¡å¼**: åœ¨ `types.ts` æ·»åŠ æ–°æšä¸¾ï¼Œåœ¨ `Game.ts` æ·»åŠ é€»è¾‘
2. **è‡ªå®šä¹‰éš¾åº¦**: æ‰©å±• `DIFFICULTY_CONFIGS`
3. **éŸ³æ•ˆ**: åœ¨ `Game.ts` æ·»åŠ éŸ³é¢‘ç®¡ç†
4. **åŠ¨ç”»**: åœ¨ Vue ç»„ä»¶ä¸­æ·»åŠ  transition
5. **ç»Ÿè®¡æ•°æ®**: æ‰©å±• `Game` ç±»æ·»åŠ ç»Ÿè®¡å±æ€§
6. **å¤šäººæ¨¡å¼**: åˆ›å»ºæ–°çš„ `MultiplayerGame` ç±»ç»§æ‰¿ `Game`

## æœ€ä½³å®è·µ

1. **ä¸šåŠ¡é€»è¾‘æ”¾åœ¨ models/**
2. **Vue ç›¸å…³ä»£ç æ”¾åœ¨ components/ å’Œ composables/**
3. **ä¿æŒç»„ä»¶ç®€å•ï¼Œé€»è¾‘åœ¨ Hook ä¸­**
4. **ä½¿ç”¨ TypeScript ç±»å‹æç¤º**
5. **éµå¾ªå•ä¸€èŒè´£åŸåˆ™**
